<!DOCTYPE html>
<html lang="en" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>listAll</title>
    <!-- Include global stylesheet -->
    <link rel="stylesheet" th:href="@{/static/css/global.css}">
    <!-- Include navbar specific stylesheet -->
    <link rel="stylesheet" th:href="@{/static/css/header.css}">
    <!-- Include footer specific stylesheet -->
    <link rel="stylesheet" th:href="@{/static/css/footer.css}">
    <!-- Include admin specific stylesheet -->
    <link rel="stylesheet" th:href="@{/static/css/admin.css}">
    <!-- Include modal specific stylesheet -->
    <link rel="stylesheet" th:href="@{/static/css/modal.css}">
    <!-- Include FontAwesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <script>
        const successMessage = `[[${ successMessage }]]`;
        if(successMessage) alert(successMessage);
    </script>
</head>
<body>
<wrapper>
    <header>
        <!-- Importing the navbar with Thymeleaf -->
        <nav th:insert="common/header :: navbar"></nav>
    </header>

    <aside class="side-bar">
        <ul class="sidebar-menu">
            <li>
                <button class="admin-btn" onclick="location.href='/admin/member-management'">회원관리</button>
            </li>
            <li>
                <button class="admin-btn active" onclick="location.href='/game/listAll'">게임관리</button>
            </li>
            <li>
                <button class="admin-btn" onclick="location.href='/admin/order-management'">주문관리</button>
            </li>
            <li>
                <button class="admin-btn" onclick="location.href='/admin/comment-management'">댓글관리</button>
            </li>
        </ul>
    </aside>

    <main>
        <section class="top-bar">
            <button class="admin-btn active" onclick="location.href='/game/listAll'">전체조회</button>
            <!-- Trigger/Open The listOneModal -->
            <button id="listOneBtn" class="admin-btn" onclick="location.href='/game/listOne'">개별조회</button>
            <!-- Trigger/Open The registModal -->
            <button id="registBtn" class="admin-btn" onclick="location.href='/game/regist'">등록하기</button>
        </section>

        <div id="listOneModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
<!--                <div class="modal-header close">&times;</div>-->
                <div class="modal-body">
                    <form class="adm-form" th:action="@{/game/listOne}" method="post">
                        <div class="admin-main-input">
                            <label for="gameCode">게임코드:&nbsp;</label>
                            <input class="adm-sub-input" type="number" id="gameCode" name="gameCode" required />
                        </div>
                        <div class="adm-main-btn">
                            <button class="adm-sub-btn" type="submit">조회하기&nbsp;<i class="fa-solid fa-paper-plane"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <script>
            // Get the modal
            var modal = document.getElementById("listOneModal");

            // Get the button that opens the moal
            var btn = document.getElementById("listOneBtn");

            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks the button, open the modal
            btn.onclick = function () {
                modal.style.display = "block";
            }

            // When the user clicks on <span> (x), close the modal
            span.onclick = function () {
                modal.style.display = "none";
            }

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            }
        </script>

        <div id="registModal" class="modal">
        </div>

        <article>
            <table>
                <tr>
                    <th>게임코드</th>
                    <th>게임이름</th>
                    <th>게임용량</th>
                    <th>게임가격</th>
                    <th>업로드일자</th>
                    <th>게임출처</th>
                    <th>게임사양</th>
                    <th>원본사진</th>
                    <th>썸네일사진</th>
                </tr>
                <tr th:each="game : ${ gameList }">
                    <td th:text="${ game.gameCode }"></td>
                    <td th:text="${ game.gameName }"></td>
                    <td th:text="${ game.gameStorage }"></td>
                    <td th:text="${ game.gamePrice }"></td>
                    <td th:text="${ game.uploadDate }"></td>
                    <td th:text="${ game.gameOrigin }"></td>
                    <td th:text="${ game.gameRequirement }"></td>
                    <td th:text="${ game.gamePicture }"></td>
                    <td th:text="${ game.gameThumbnail }"></td>
                    <td>
                        <form th:action="@{/game/edit/{gameCode}(gameCode=${game.gameCode})}" method="post">
                            <button type="submit">수정</button>
                        </form>
                    </td>
                    <td>
                        <form th:action="@{/game/delete/{gameCode}(gameCode=${game.gameCode})}" method="post">
                            <button type="submit">삭제</button>
                        </form>
                    </td>
                </tr>
            </table>

            <!-- Pagination example -->
            <nav>
                <button>1</button>
                <button>2</button>
                <button>3</button>
                <button>...</button>
                <button>99</button>
            </nav>
        </article>
    </main>
</wrapper>

<!-- Footer -->
<footer th:insert="common/footer :: footer"></footer>
</body>
</html>
